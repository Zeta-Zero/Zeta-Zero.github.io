
### 简介

一般USB具有HID，CDC，MSC和自定义类。
一般USB 2.0有两根差分传输线D+，D-和两根电源线VCC和GND。

USB编码方案采用不归零取反，当传输线上的差分数据输入0就取反，输入1时保持原值。
USB的数据格式是由二进制数字串构成，有数字串构成**域**（七种），域再构成**包**，包再构成**事务**（IN，OUT,SETUP），事务最后构成**传输**。
  - 域是USB数据最小单位，由若干位组成，分七个类型：同步域，标识域，地址域，端点域，帧号域，数据域和校验域。
  - 包是由域构成的，由四种类型：令牌包，数据包，握手包和特殊包。
    - 令牌包分为输入包，输出包，设置包和帧起始包。
    - 数据包，当一次发送数据长度大雨相应端点的容量时，会把数据包分包发送。
    - 握手包，SYNC+PID
  - 事务，分别有IN，OUT 和 SETUPT三大事务。每一种事务都由令牌包，数据包和握手包三个阶段构成。
    - 令牌包，启动一个输入，输出或设置事务。
    - 数据包，按输入，输出发送相应的数据。
    - 握手包，返回数据接收的情况。在同步传输中的IN和OUT事务没有这个阶段。
  - 传输，有四种类型：中断传输，批量传输，同步传输和控制传输。
    - 中断传输，用于键盘，鼠标等HID设备数据传输。
    - 批量传输，用于大容量数据传输。
    - 同步传输，在IN和OUT事务中没有返回包；在数据包阶段所有数据包都是Data0。
    - 控制传输，由三个阶段构成——初始阶段、可选数据阶段、状态信息步骤。

标识码
USB1.1，只有10中；USB2.0使用了16种。
比如，输出，输入，帧起始，设置，偶数据包，奇数据包等。

USB主机识别USB设备。
通过6个动作状态来对设备进行枚举配置
  - 接入态：检测信号线的电平变化
  - 供电态：
  - 缺省态：配置之前，通过缺省地址0域主机通信
  - 地址态：主机分配
  - 配置态：通过标准USB请求命令来获取设备的各种信息
  - 挂起态：总线供电设备在3ms内没有操作，即USB处于空闲状态时，设备自动进入挂起状态
